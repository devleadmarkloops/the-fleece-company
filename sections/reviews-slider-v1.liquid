{%- style -%}
  #shopify-section-{{ section.id }} {
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    {%- if section.settings.use_custom_colors %}
      --gradient-background: {% if section.settings.gradient_background != blank %}{{ section.settings.gradient_background }}{% else %}{{ section.settings.colors_background }}{% endif %};
      --color-background: {{ section.settings.colors_background.red }}, {{ section.settings.colors_background.green }}, {{ section.settings.colors_background.blue }};
      --color-foreground: {{ section.settings.colors_text.red }}, {{ section.settings.colors_text.green }}, {{ section.settings.colors_text.blue }};
      --color-card-background: {{ section.settings.colors_card_background.red }}, {{ section.settings.colors_card_background.green }}, {{ section.settings.colors_card_background.blue }};
      --color-stars: {{ section.settings.colors_stars.red }}, {{ section.settings.colors_stars.green }}, {{ section.settings.colors_stars.blue }};
      --color-dots: {{ section.settings.colors_dots.red }}, {{ section.settings.colors_dots.green }}, {{ section.settings.colors_dots.blue }};
    {% endif -%}
  }

  @media screen and (max-width: 749px) {
    #shopify-section-{{ section.id }} {
      --section-padding-top: {{ section.settings.padding_top_mob }}px;
      --section-padding-bottom: {{ section.settings.padding_bottom_mob }}px;
    }
  }

  .reviews-slider-{{ section.id }} {
    background: rgb(var(--color-background));
    color: rgb(var(--color-foreground));
    padding-top: var(--section-padding-top);
    padding-bottom: var(--section-padding-bottom);
  }

  /* Heading */
  .reviews-slider-{{ section.id }} .section-heading {
    text-align: center;
    margin-bottom: 3.5rem;
  }

  .reviews-slider-{{ section.id }} .section-heading h2 {
    font-family: var(--new-font-heading-family);
    margin: 0;
  }

  /* Slider wrapper with side arrows */
  .reviews-slider-{{ section.id }} .slider-outer {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  @media screen and (min-width: 1400px) {
    .reviews-slider-{{ section.id }} .slider-outer {
      padding-inline: 3rem;
    }
  }

  .reviews-slider-{{ section.id }} .slider-arrow {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    border: 1.5px solid rgb(var(--color-foreground));
    background: #fff;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: background 0.2s;
    padding: 0;
  }
  .reviews-slider-{{ section.id }} .slider-arrow:hover {
    background: rgb(var(--color-foreground));
  }
  .reviews-slider-{{ section.id }} .slider-arrow svg {
    width: 13px;
    height: 13px;
    fill: rgb(var(--color-foreground));
    transition: fill 0.2s;
  }
  .reviews-slider-{{ section.id }} .slider-arrow:hover svg {
    fill: rgb(var(--color-background));
  }
  .reviews-slider-{{ section.id }} .slider-arrow.swiper-button-disabled {
    opacity: 0.35;
    cursor: default;
    pointer-events: none;
  }
  .reviews-slider-{{ section.id }} .swiper {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    max-width: 100rem;
  }
  .reviews-slider-{{ section.id }} .swiper-slide {
    height: auto;
  }
  .reviews-slider-{{ section.id }} .review-card {
    background: rgb(var(--color-card-background, var(--color-background)));
    padding: 2.4rem 2rem;
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
    height: 100%;
    box-sizing: border-box;
  }
  .reviews-slider-{{ section.id }} .review-card-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
  }
  .reviews-slider-{{ section.id }} .review-name-wrap {
    display: flex;
    flex-direction: column;
    gap: 1px;
  }
  .reviews-slider-{{ section.id }} .review-author {
    font-family: var(--new-font-heading-family);
    font-size: 2rem;
    font-weight: 400;
    margin: 0;
    line-height: 1;
  }
  .reviews-slider-{{ section.id }} .review-verified {
    display: flex;
    align-items: center;
    gap: 4px;
    margin: 0;
    flex-wrap: wrap;
    font-family: var(--new-font-body-family);
    font-size: 1.4rem;
    color: #34CE73;
    line-height: 1.4;
    letter-spacing: normal;
  }
  .reviews-slider-{{ section.id }} .review-verified svg {
    width: 1.2rem;
    height: 1.2rem;
    flex-shrink: 0;
  }
  .reviews-slider-{{ section.id }} .review-stars {
    display: flex;
    align-items: center;
    gap: 2px;
    flex-shrink: 0;
  }
  .reviews-slider-{{ section.id }} .review-stars svg {
    width: 1.5rem;
    height: 1.5rem;
    color: rgb(var(--color-stars));
  }
  .reviews-slider-{{ section.id }} .review-text {
    margin: 0;
    text-align: center;
    font-family: var(--new-font-body-family);
    font-size: 1.6rem;
    font-weight: 500;;
    line-height: 1.4;
    letter-spacing: 0;
  }
  .reviews-slider-{{ section.id }} .reviews-footer {
    text-align: center;
    margin-top: 3rem;
  }
  .reviews-slider-{{ section.id }} .reviews-footer .btn-all-reviews {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-family: var(--new-font-heading-family);
    font-size: 2rem;
    line-height: normal;
    letter-spacing: 0;
    color: rgb(var(--color-foreground));
    text-decoration: underline;
    text-underline-offset: 3px;
    text-transform: uppercase;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: opacity 0.2s;
  }
  .reviews-slider-{{ section.id }} .reviews-footer .btn-all-reviews:hover {
    opacity: 0.85;
  }
  .reviews-slider-{{ section.id }} .swiper-pagination {
    display: none;
    position: static;
    margin-top: 14px;
    text-align: center;
  }
  .reviews-slider-{{ section.id }} .swiper-pagination-bullet {
    width: 7px;
    height: 7px;
    background: rgb(var(--color-dots, 0,0,0));
    opacity: 0.3;
    margin: 0 3px !important;
  }

  .reviews-slider-{{ section.id }} .swiper-pagination-bullet-active {
  opacity: 1;
  }
  @media screen and (max-width: 749px) {
    .reviews-slider-{{ section.id }} .slider-arrow {
      display: none;
    }
    .reviews-slider-{{ section.id }} .section-heading {
      text-align: center;
      margin-bottom: 2.5rem;
    }
    .reviews-slider-{{ section.id }} .review-card {
      padding: 1.8rem 1.6rem;
      border-radius: 10px;
    }
    .reviews-slider-{{ section.id }} .review-author {
      font-size: 1.8rem;
    }
    .reviews-slider-{{ section.id }} .review-verified {
      font-size: 1.2rem;
    }
    .review-verified svg {
      width: 1.2rem;
      height: 1.2rem;
    }
    .reviews-slider-{{ section.id }} .swiper-pagination {
      display: flex;
      justify-content: center;
      align-items: center;
    }
  }
{%- endstyle -%}

<div class="reviews-slider-{{ section.id }}">
  <div class="page-width">

    {%- if section.settings.heading != blank -%}
      <div class="section-heading">
        <h2 class="{{ section.settings.heading_size }}">{{ section.settings.heading }}</h2>
      </div>
    {%- endif -%}

    <div class="slider-outer">

      <!-- Prev arrow -->
      <button class="slider-arrow swiper-prev-{{ section.id }}" aria-label="Previous">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 17">
          <path d="M8.25149 0.202007C8.55842 -0.0672531 8.85353 -0.0672531 9.13685 0.202007C9.42016 0.471268 9.42016 0.751747 9.13685 1.04345L1.34574 8.41446L9.13685 15.7855C9.42016 16.0772 9.42016 16.3577 9.13685 16.6269C8.85353 16.8962 8.55842 16.8962 8.25149 16.6269L0.247899 9.0203C0.082633 8.84079 0 8.63884 0 8.41446C0 8.19008 0.082633 7.98813 0.247899 7.80862L8.25149 0.202007Z"/>
        </svg>
      </button>

      <!-- Swiper -->
      <div class="swiper reviews-swiper-{{ section.id }}">
        <div class="swiper-wrapper">
          {%- for block in section.blocks -%}
            <div class="swiper-slide" {{ block.shopify_attributes }}>
              <div class="review-card">

                <div class="review-card-top">
                  <div class="review-name-wrap">
                    <p class="review-author">{{ block.settings.author_name }}</p>
                    {%- if section.settings.show_verified -%}
                      <p class="review-verified">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M6 0C2.69173 0 0 2.69173 0 6C0 9.30827 2.69173 12 6 12C9.30827 12 12 9.30827 12 6C12 2.69173 9.30827 0 6 0ZM9.35338 4.42105L5.5188 8.22556C5.29323 8.45113 4.93233 8.46617 4.69173 8.2406L2.66165 6.39098C2.42105 6.16541 2.40602 5.78947 2.61654 5.54887C2.84211 5.30827 3.21805 5.29323 3.45865 5.5188L5.06767 6.99248L8.49624 3.56391C8.73684 3.32331 9.11278 3.32331 9.35338 3.56391C9.59399 3.80451 9.59399 4.18045 9.35338 4.42105Z" fill="#34CE73"/>
                        </svg>
                        {{ section.settings.verified_label | default: 'Verified Customer' }}
                      </p>
                    {%- endif -%}
                  </div>

                  <div class="review-stars">
                    {%- assign star_count = block.settings.star_rating | default: 5 -%}
                    {%- for i in (1..5) -%}
                      <svg viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        {%- if i <= star_count -%}
                          <path d="M6.74033 10.2925L10.9058 12.8066L9.80038 8.06815L13.4806 4.87998L8.63434 4.46882L6.74033 0L4.84628 4.46882L0 4.87998L3.68021 8.06815L2.57479 12.8066L6.74033 10.2925Z" fill="currentColor"/>
                        {%- else -%}
                          <path d="M6.74033 10.2925L10.9058 12.8066L9.80038 8.06815L13.4806 4.87998L8.63434 4.46882L6.74033 0L4.84628 4.46882L0 4.87998L3.68021 8.06815L2.57479 12.8066L6.74033 10.2925Z" fill="none" stroke="currentColor" stroke-width="0.8"/>
                        {%- endif -%}
                      </svg>
                    {%- endfor -%}
                  </div>
                </div>

                <p class="review-text">{{ block.settings.review_text }}</p>

              </div>
            </div>
          {%- endfor -%}
        </div>
        <div class="swiper-pagination swiper-pagination-{{ section.id }}"></div>
      </div>

      <!-- Next arrow -->
      <button class="slider-arrow swiper-next-{{ section.id }}" aria-label="Next">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 17">
          <path d="M1.09784 0.202007C0.790919 -0.0672531 0.495801 -0.0672531 0.212488 0.202007C-0.0708246 0.471268 -0.0708246 0.751747 0.212488 1.04345L8.0036 8.41446L0.212488 15.7855C-0.0708246 16.0772 -0.0708246 16.3577 0.212488 16.6269C0.495801 16.8962 0.790919 16.8962 1.09784 16.6269L9.10144 9.0203C9.2667 8.84079 9.34933 8.63884 9.34933 8.41446C9.34933 8.19008 9.2667 7.98813 9.10144 7.80862L1.09784 0.202007Z"/>
        </svg>
      </button>

    </div>

    <!-- Footer button -->
    {%- if section.settings.button_label != blank -%}
      <div class="reviews-footer">
        <a href="{{ section.settings.button_link | default: '#' }}" class="btn-all-reviews">
          {{ section.settings.button_label }}
        </a>
      </div>
    {%- endif -%}

  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    new Swiper('.reviews-swiper-{{ section.id }}', {
      slidesPerView: 1,
      spaceBetween: 16,
      speed: 500,
      loop: true,
      navigation: {
        nextEl: '.swiper-next-{{ section.id }}',
        prevEl: '.swiper-prev-{{ section.id }}',
      },
      pagination: {
        el: '.swiper-pagination-{{ section.id }}',
        clickable: true,
        },
      breakpoints: {
        750: {
          slidesPerView: 2,
          spaceBetween: 20,
          autoHeight: false,
        },
        990: {
          slidesPerView: 3,
          spaceBetween: 24,
          autoHeight: false,
        }
      }
    });
  });
</script>

{% schema %}
{
  "name": "Reviews slider v1",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Trusted by 18,000+ Customers"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h2", "label": "Small" },
        { "value": "h1", "label": "Medium" },
        { "value": "h0", "label": "Large" }
      ],
      "default": "h1"
    },
    {
      "type": "checkbox",
      "id": "show_verified",
      "label": "Show verified badge",
      "default": true
    },
    {
      "type": "text",
      "id": "verified_label",
      "label": "Verified label text",
      "default": "Verified Customer"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "SEE ALL REVIEWS"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "checkbox",
      "id": "use_custom_colors",
      "default": false,
      "label": "Use custom colors"
    },
    {
      "type": "color",
      "id": "colors_text",
      "label": "Text color",
      "default": "#212326"
    },
    {
      "type": "color",
      "id": "colors_background",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "colors_card_background",
      "label": "Card background color",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "colors_stars",
      "label": "Stars color",
      "default": "#e07b39"
    },
    {
      "type": "color",
      "id": "colors_dots",
      "label": "Dots color",
      "default": "#000000"
    },
    {
      "type": "color_background",
      "id": "gradient_background",
      "label": "Gradient background"
    },
    {
      "type": "header",
      "content": "Desktop Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 60
    },
    {
      "type": "header",
      "content": "Mobile Padding"
    },
    {
      "type": "range",
      "id": "padding_top_mob",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mob",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "text",
          "id": "author_name",
          "label": "Author name",
          "default": "Nicole"
        },
        {
          "type": "range",
          "id": "star_rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Star rating",
          "default": 5
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review text",
          "default": "\"This blanket feels incredibly soft and breathable. I sleep comfortably without overheating, and it looks beautiful on my bed every single night.\""
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews slider v1",
      "blocks": [
        {
          "type": "review",
          "settings": {
            "author_name": "Nicole",
            "star_rating": 5,
            "review_text": "\"This muslin blanket feels incredibly soft and breathable. I sleep comfortably without overheating, and it looks beautiful on my bed every single night.\""
          }
        },
        {
          "type": "review",
          "settings": {
            "author_name": "Erin C.",
            "star_rating": 5,
            "review_text": "\"Lightweight yet cozy, this blanket is perfect year-round. It drapes nicely, washes well, and feels even softer over time. Definitely worth it.\""
          }
        },
        {
          "type": "review",
          "settings": {
            "author_name": "Sonia",
            "star_rating": 5,
            "review_text": "\"This muslin blanket feels incredibly soft and breathable. I sleep comfortably without overheating, and it looks beautiful on my bed every single night.\""
          }
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer", "custom.overlay"]
  }
}
{% endschema %}
